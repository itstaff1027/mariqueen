import{r as m,a as I,j as e}from"./app-DzVPnBm_.js";import{A as R}from"./AuthenticatedLayout-CM951Vbx.js";import{T as j}from"./TextInput-BMqz3Mf8.js";import{I as l}from"./InputLabel-CVOs2is0.js";import{I as x}from"./InputError-W5ybVOTN.js";import{J as S}from"./textarea-C9AA6iOp.js";import"./ApplicationLogo-1LC3dhoW.js";import"./useFocusRing-CbgUoASV.js";import"./description-DvabQjNZ.js";import"./use-sync-refs-mp_AuGG8.js";const T=({sales_order_return:r,warehouses:v})=>{var h,g,y;const[s,p]=m.useState(((h=r==null?void 0:r.reference_order.items)==null?void 0:h.map(t=>({...t,returnQuantity:t.quantity})))||[]),[c,C]=m.useState(r==null?void 0:r.return_items),{data:n,setData:d,put:b,errors:o}=I({sales_order_id:((g=r.reference_order)==null?void 0:g.id)||"",sales_order_number:((y=r.reference_order)==null?void 0:y.order_number)||"",items:[],return_date:r.return_date||new Date().toISOString().split("T")[0]||"",warehouse_id:r.warehouse_id||"",remarks:r.remarks||""}),N=t=>{p(a=>a.filter(u=>u.id!==t))},w=(t,a)=>{p(u=>u.map(i=>{if(i.id===t){const f=i.quantity,k=a>f?f:a;return{...i,returnQuantity:k}}return i}))},_=()=>{console.log(n),b(`/sales_order_returns/${r.id}`)};return m.useEffect(()=>{d("items",s),console.log(r)},[s]),e.jsx(R,{header:e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Create Order Return"}),children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"rounded-lg bg-white p-8 shadow-lg",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx(l,{htmlFor:"order_number",value:"Order Number"}),e.jsx(j,{id:"order_number",name:"order_number",value:n.sales_order_number,disabled:!0,placeholder:"Search Order Number...",className:"w-full rounded-md border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx(l,{htmlFor:"return_date",value:"Return Date (YYYY-MM-DD)"}),e.jsx(j,{id:"return_date",name:"return_date",value:n.return_date,onChange:t=>{d("return_date",t.target.value)},placeholder:"Return Date",className:"w-full rounded-md border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(x,{message:o.return_date})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx(l,{htmlFor:"warehouse_id",value:"Select Warehouse"}),e.jsxs("select",{className:"w-full rounded-md border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",id:"warehouse_id",name:"warehouse_id",value:n.warehouse_id,onChange:t=>{d("warehouse_id",t.target.value)},children:[e.jsx("option",{value:"",children:"Select Warehouse"}),v.map(t=>e.jsx("option",{value:t.id,children:t.name}))]}),e.jsx(x,{message:o.warehouse_id})]}),e.jsxs("div",{className:"overflow-x-auto mb-8",children:[e.jsx("h1",{children:"Adjust Here"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Return Qty"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[s==null?void 0:s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700",children:t.id}),e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700",children:[t.product_variant.product.product_name," ","–"," ",t.product_variant.colors.color_name," ","– Size:"," ",parseInt(t.product_variant.size_values.size_values)," ","– Heel:"," ",t.product_variant.heel_heights.value,'"']}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("input",{type:"number",min:"0",max:t.quantity,value:t.returnQuantity,onChange:a=>w(t.id,parseInt(a.target.value)),className:"w-20 rounded-md border border-gray-300 p-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>N(t.id),className:"inline-flex items-center rounded-md bg-red-500 px-3 py-1 text-xs font-semibold text-white hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400",children:"Remove"})})]},t.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No items to display."})})]})]})]}),e.jsxs("div",{className:"overflow-x-auto mb-8",children:[e.jsx("h1",{children:"Reference"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Returned Qty"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[c==null?void 0:c.map(t=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700",children:t.id}),e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700",children:[t.sales_order_items.product_variant.product.product_name," ","–"," ",t.sales_order_items.product_variant.colors.color_name," ","– Size:"," ",parseInt(t.sales_order_items.product_variant.size_values.size_values)," ","– Heel:"," ",t.sales_order_items.product_variant.heel_heights.value,'"']}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.quantity})]},t.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No items to display."})})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"remarks",value:"Remarks"}),e.jsx(S,{id:"remarks",name:"remarks",value:n.remarks,onChange:t=>{d("remarks",t.target.value)},placeholder:"Remarks/Note/Reasons...",className:"w-full rounded-md border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(x,{message:o.remarks})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx("button",{type:"submit",className:"inline-flex items-center rounded-md bg-blue-500 px-6 py-3 text-base font-semibold text-white hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-400",onClick:_,children:"Update"})})]})})})})};export{T as default};
