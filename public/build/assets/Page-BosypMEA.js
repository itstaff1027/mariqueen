import{r as l,j as e,U as j,h as g}from"./app-CDJ9BaRc.js";import{A as f}from"./AuthenticatedLayout-CiEq-52F.js";import"./ApplicationLogo-BqbaN8sQ.js";const v=({onClose:d,order:s})=>{const[n,i]=l.useState(""),o=l.useRef(null);l.useEffect(()=>{fetch("/storage/assets/jojoBragaisWW.png").then(r=>{if(!r.ok)throw new Error("Network response was not ok");return r.blob()}).then(r=>{const a=new FileReader;a.onloadend=()=>{i(a.result)},a.readAsDataURL(r)}).catch(r=>console.error("Error loading image:",r))},[]);const x=()=>{const{jsPDF:r}=window.jspdf,a=new r({orientation:"portrait",unit:"pt",format:"a4"}),c=10,p=a.internal.pageSize.getWidth(),h=o.current,b=h.offsetWidth,m=(p-c*2)/b;a.html(h,{x:c,y:c,html2canvas:{useCORS:!0,scale:m},callback:t=>{t.save(`SalesOrder_${s.order_number}.pdf`)}})};return e.jsx("div",{className:"w-full",style:{position:"fixed",inset:0,alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.5)",zIndex:50,overflowY:"auto"},children:e.jsxs("div",{style:{backgroundColor:"#fff",padding:"20px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",margin:"20px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:d,style:{color:"red",fontSize:"14px",border:"none",background:"none"},children:"Close"})}),e.jsx("div",{ref:o,style:{padding:"20px",color:"#000",fontSize:"12pt",backgroundColor:"#fff"},children:e.jsxs("div",{className:"container mx-auto p-6",children:[n&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:n,alt:"Logo",style:{maxWidth:"150px",marginBottom:"10px"}})}),e.jsxs("div",{className:"flex w-full flex-col items-center justify-center p-10",children:[e.jsxs("div",{className:"grid w-full grid-cols-2 border-b-2",children:[e.jsx("h1",{className:"w-full text-left text-3xl font-bold"}),e.jsxs("h1",{className:"w-full text-right text-3xl font-bold",children:["Status: ",s.status.toUpperCase()]})]}),e.jsxs("div",{className:"grid grid-cols-2 w-full",children:[e.jsxs("h1",{className:"text-2xl font-bold w-full text-left",children:["Courier: ",e.jsx("u",{children:s.courier.name.toUpperCase()})]}),e.jsxs("h1",{className:"text-2xl font-bold w-full text-right",children:["Packaging Type:"," ",e.jsx("u",{children:s.packaging_type.packaging_name.toUpperCase()})]})]}),e.jsx("div",{className:"grid grid-cols-2 w-full",children:e.jsxs("h1",{className:"text-2xl font-bold w-full text-left",children:["Shoulder By: ",e.jsx("u",{children:s.shoulder_by.toUpperCase()})]})}),e.jsxs("div",{className:"my-4 w-full",children:[e.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Order Items"}),e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2 text-left",children:"SKU"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Quantity"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Unit Price"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Total Price"})]})}),e.jsx("tbody",{children:s.items&&s.items.length>0?s.items.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:r.product_variant.sku}),e.jsx("td",{className:"border px-4 py-2 text-right",children:r.quantity}),e.jsxs("td",{className:"border px-4 py-2 text-right",children:["P ",parseFloat(r.unit_price).toFixed(2)]}),e.jsxs("td",{className:"border px-4 py-2 text-right",children:["P ",parseFloat(r.total_price).toFixed(2)]})]},r.id)):e.jsx("tr",{children:e.jsx("td",{className:"border px-4 py-2 text-center",colSpan:"5",children:"No items found"})})})]})]}),e.jsxs("div",{className:"flex w-full flex-col items-end justify-end border-t pt-4",children:[e.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Order Summary"}),e.jsxs("p",{className:"text-gray-700",children:["Subtotal: P ",parseFloat(s.total_amount).toFixed(2)]}),e.jsxs("p",{className:"text-gray-700",children:["VATables: P",parseFloat(s.total_amount/1.12).toFixed(2)]}),e.jsxs("p",{className:"text-gray-700",children:["VAT: P",parseFloat(s.total_amount/1.12*.12).toFixed(2)]}),e.jsxs("p",{className:"text-gray-700",children:["Shipping Cost: P ",parseFloat(s.shipping_cost).toFixed(2)]}),e.jsxs("p",{className:"text-gray-700",children:["Rush Order Fee: P",parseFloat(s.rush_order_fee).toFixed(2)]}),e.jsxs("p",{className:"font-bold text-2xl text-gray-700",children:["Grand Total: P ",parseFloat(s.grand_amount).toFixed(2)]})]}),e.jsx("div",{className:"w-full mb-4",children:e.jsxs("p",{className:"text-l font-bold w-full",children:["Packaging Type Description:"," ",e.jsx("u",{children:s.packaging_type.description})]})}),e.jsxs("div",{className:"mb-4 w-full",children:[e.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Payment Information"}),e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2 text-left",children:"Payment Method"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Amount Paid"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Change Due"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Excess"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Balance"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Date"})]})}),e.jsx("tbody",{children:s.payments&&s.payments.length>0?s.payments.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:r.payment_method.name}),e.jsxs("td",{className:"border px-4 py-2",children:["P ",r.amount_paid]}),e.jsxs("td",{className:"border px-4 py-2 text-right",children:["P ",r.change_due]}),e.jsxs("td",{className:"border px-4 py-2 text-right",children:["P ",r.excess_amount]}),e.jsxs("td",{className:"border px-4 py-2 text-right",children:["P ",r.remaining_balance]}),e.jsx("td",{className:"border px-4 py-2 text-right"})]},r.id)):e.jsx("tr",{children:e.jsx("td",{className:"border px-4 py-2 text-center",colSpan:"5",children:"No items found"})})})]})]}),e.jsxs("div",{className:"w-full p-4",children:[e.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Customer Information"}),s.customers?e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-700",children:[s.customers.first_name," ",s.customers.last_name]}),e.jsxs("p",{className:"text-gray-700",children:["Email: ",s.customers.email]}),e.jsxs("p",{className:"text-gray-700",children:["Phone: ",s.customers.phone]}),e.jsxs("p",{className:"text-gray-700",children:["Address: ",s.customers.address]}),s.customers.receiver_name&&e.jsxs("p",{className:"text-gray-700",children:["Receiver: ",s.customers.receiver_name]})]}):e.jsx("p",{className:"text-gray-700",children:"No customer information available."})]}),e.jsxs("div",{className:"w-full border-t pt-4",children:[e.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Remarks/Note:"}),e.jsx("div",{className:"h-40 w-full rounded-xl border p-4",children:s.remarks})]})]})]})}),e.jsx("div",{style:{marginTop:"16px",textAlign:"center"},children:e.jsx("button",{onClick:x,style:{backgroundColor:"#000",color:"#fff",padding:"10px 20px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"14px"},children:"Download PDF"})})]})})},k=({sales_orders:d})=>{var m;const[s,n]=l.useState(null),[i,o]=l.useState(""),[x,r]=l.useState(""),[a,c]=l.useState(""),p=()=>{g.visit("/point_of_sales",{method:"get",data:{search:i,fromDate:x,toDate:a},preserveState:!0,preserveScroll:!0})},h=t=>{n(t)},b=()=>{n(null)};return l.useEffect(()=>{},[]),e.jsxs(f,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Sales Orders"}),children:[e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-md rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Sales Order"}),e.jsx(j,{href:"/point_of_sales/create",className:"bg-blue-500 text-white px-4 py-2 rounded shadow hover:bg-blue-600",children:"Create Order"})]}),e.jsxs("div",{className:"col-span-3 mb-4 grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"From Date:"}),e.jsx("input",{type:"date",value:x,onChange:t=>r(t.target.value),className:"border rounded p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"To Date:"}),e.jsx("input",{type:"date",value:a,onChange:t=>c(t.target.value),className:"border rounded p-2"})]}),e.jsx("button",{onClick:p,className:"bg-blue-500 text-white px-4 py-2 rounded shadow hover:bg-blue-600",children:"Filter"})]}),e.jsx("input",{type:"text",placeholder:"Search for Order Number, Customer Name, Tracking #",className:"w-full rounded-md border p-2 mb-2",value:i,onChange:t=>o(t.target.value)}),e.jsxs("table",{className:"w-full table-auto border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"#"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Order #"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Client Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Tracking #"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Status"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Total Cost"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Payment"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Balance"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Action"})]})}),e.jsx("tbody",{children:(m=d.data)==null?void 0:m.map((t,u)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:u+1}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.order_number}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[t.customers.first_name," ",t.customers.last_name]}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.tracking_number?t.tracking_number:"No Tracking # added yet."}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.status}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.grand_amount}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.payments.reduce((y,N)=>y+parseFloat(N.amount_paid,2),0).toFixed(2)}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.balance}),e.jsxs("td",{className:"border border-gray-300 px-6 py-3 space-x-2",children:[e.jsx("button",{onClick:()=>h(t),className:"p-2 rounded-xl text-red-500 hover:underline",children:"Print"}),e.jsx(j,{href:`/point_of_sales/${t.id}/edit`,className:"text-blue-500 hover:underline",children:"Edit"}),e.jsx(j,{href:`/point_of_sales/${t.id}`,className:"text-emerald-500 hover:underline",children:"View"})]})]},t.id))})]}),d.links&&e.jsx("div",{className:"mt-4 flex justify-center",children:d.links.map((t,u)=>e.jsx("button",{onClick:()=>{t.url&&g.visit(t.url,{preserveState:!0,preserveScroll:!0})},className:`mx-1 px-3 py-1 border rounded ${t.active?"bg-blue-500 text-white":"bg-white text-blue-500"}`,dangerouslySetInnerHTML:{__html:t.label}},u))})]})})})})}),s&&e.jsx(v,{order:s,onClose:b})]})};export{k as default};
