import{a as S,r as i,j as e,b as C}from"./app-DqGLNykj.js";import{A as P}from"./AuthenticatedLayout-3xGGU6cL.js";import{T as m}from"./TextInput-Df0HgUW6.js";import{I as r}from"./InputLabel-CemudOsH.js";import{I as d}from"./InputError-CVvqeibb.js";import{J as k}from"./textarea-DQIe-qU6.js";import"./ApplicationLogo-_9ofte3m.js";import"./description-BANkus6W.js";import"./use-sync-refs-CJoF7JlP.js";const T=({sales_orders:j,payment_methods:b})=>{const{data:n,setData:t,post:g,errors:l}=S({sales_order_id:"",order_number:"",payment_method_id:"",status:"",payment_amount:"",grand_total:0,balance:0,remarks:"",type_purpose:"Balance",images:[]}),[c,p]=i.useState(""),[v,u]=i.useState(!1),[o,_]=i.useState(null),[h,y]=i.useState([]),x=j.filter(a=>a.order_number.toLowerCase().includes(c.toLowerCase())),f=a=>{t("order_number",a.order_number),p(a.order_number),u(!1),C.get(`/sales_order/${a.id}`).then(s=>{_(s.data),console.log(s.data),t("grand_total",s.data.grand_amount),t("sales_order_id",s.data.id)}).catch(s=>{console.error("Error fetching order details:",s)})},N=a=>{const s=Array.from(a.target.files);t("images",s),y(s)},w=a=>{a.preventDefault(),console.log(n),g("/sales_payments")};return e.jsx(P,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Create Sales Payment"}),children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-4xl rounded-lg bg-white p-8 shadow-md",children:e.jsxs("div",{children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(r,{for:"order_number",value:"Order Number"}),e.jsx(m,{id:"order_number",name:"order_number",value:c,onChange:a=>{p(a.target.value),u(!0)},onFocus:()=>u(!0),className:"w-full rounded border p-2",placeholder:"Search Order Number..."}),e.jsx(d,{message:l.order_number}),v&&x.length>0&&e.jsx("ul",{className:"absolute z-10 max-h-60 w-full overflow-y-auto rounded border bg-white",children:x.map(a=>e.jsx("li",{className:"cursor-pointer px-4 py-2 hover:bg-gray-200",onClick:()=>f(a),children:a.order_number},a.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(r,{for:"payment_method_id",value:"Payment Method"}),e.jsxs("select",{id:"payment_method_id",value:n.payment_method_id,onChange:a=>t("payment_method_id",a.target.value),className:"w-full rounded border p-2",children:[e.jsx("option",{value:"",children:"Select Payment Method"}),b.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx(d,{message:l.payment_method_id})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(r,{for:"status",value:"Status"}),e.jsxs("select",{id:"status",value:n.status,onChange:a=>t("status",a.target.value),className:"w-full rounded border p-2",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"partial",children:"Partial"})]}),e.jsx(d,{message:l.status})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(r,{for:"type_purpose",value:"Purpose"}),e.jsxs("select",{id:"type_purpose",value:n.type_purpose,onChange:a=>t("type_purpose",a.target.value),className:"w-full rounded border p-2",children:[e.jsx("option",{value:"",children:"Select purpose"}),e.jsx("option",{value:"balance",children:"Balance"}),e.jsx("option",{value:"additional",children:"Additional"})]}),e.jsx(d,{message:l.type_purpose})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(r,{for:"payment_amount",value:"Client Payment Amount"}),e.jsx(m,{id:"payment_amount",type:"number",value:n.payment_amount,onChange:a=>t("payment_amount",a.target.value),className:"w-full"}),e.jsx(d,{message:l.payment_amount})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(r,{for:"grand_total",value:"Grand Total"}),e.jsx(m,{id:"grand_total",type:"number",value:o==null?void 0:o.grand_amount,disabled:!0,className:"w-full bg-gray-100"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(r,{for:"balance",value:"Balance"}),e.jsx(m,{id:"balance",type:"number",value:o==null?void 0:o.balance,disabled:!0,className:"w-full bg-gray-100"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(r,{for:"remarks",value:"Remarks"}),e.jsx(k,{className:"w-full rounded border p-2",value:n.remarks,onChange:a=>t("remarks",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Upload Payment Images (Multiple Allowed)"}),e.jsx("input",{type:"file",name:"images",multiple:!0,onChange:N,className:"border p-2 rounded"}),l.images&&e.jsx("div",{className:"text-red-500 mt-2",children:l.images}),h.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Selected Files:"}),e.jsx("ul",{className:"list-disc list-inside",children:h.map((a,s)=>e.jsx("li",{className:"text-gray-700",children:a.name},s))})]})]}),e.jsx("button",{type:"submit",onClick:w,className:"focus:shadow-outline rounded bg-emerald-500 px-4 py-2 font-bold text-white hover:bg-emerald-700 focus:outline-none",children:"Create Sales Payment"})]})})})})};export{T as default};
