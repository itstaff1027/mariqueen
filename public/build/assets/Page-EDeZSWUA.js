import{r as s,j as a,U as v}from"./app-xcrMessi.js";import{A as Q}from"./AuthenticatedLayout-Cz4_lLEk.js";import"./ApplicationLogo-CBeWglCO.js";const k=({warehouse:i,products:d,colors:g,sizes:b,size_values:j,heel_heights:_,categories:y})=>{const[o,N]=s.useState(""),[c,f]=s.useState(""),[u,S]=s.useState(""),[h,w]=s.useState(""),[p,C]=s.useState(""),[x,z]=s.useState(""),[n,L]=s.useState("all"),m=d.filter(e=>{const l=e.total_stock;let t=!0;n==="positive"?t=l>0:n==="zero"?t=l===0:n==="negative"&&(t=l<0);const r=(!x||e.product_variant.category_id===parseInt(x))&&(!u||e.product_variant.size_id===parseInt(u))&&(!h||e.product_variant.size_value_id===parseInt(h))&&(!p||e.product_variant.heel_height_id===parseInt(p))&&(!c||e.product_variant.color_id===parseInt(c)),H=o===""||e.product_variant.sku.toLowerCase().includes(o.toLowerCase())||e.product_variant.colors.color_name.toLowerCase().includes(o.toLowerCase())||e.product_variant.categories.category_name.toLowerCase().includes(o.toLowerCase());return r&&H&&t});s.useEffect(()=>{console.log(d),console.log(i)},[d]);const A=()=>{const e=m.map(r=>({SKU:r.product_variant.sku,Design:r.product_variant.product.product_name,Color:r.product_variant.colors.color_name,Size:r.product_variant.sizes.size_name,SizeValues:r.product_variant.size_values.size_values,HeelHeight:r.product_variant.heel_heights.value,Category:r.product_variant.categories.category_name,OverallQty:r.total_stock})),l=XLSX.utils.json_to_sheet(e),t=XLSX.utils.book_new();XLSX.utils.book_append_sheet(t,l,`${i.name} Products`),XLSX.writeFile(t,`${i.name}_product_list_${new Date().toISOString().split("T")[0]}.xlsx`)};return a.jsx(Q,{header:a.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Warehouse - ",i.name]}),children:a.jsx("div",{className:"py-12",children:a.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:a.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-md",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Available Products"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(v,{href:"/inventory/stock/transactions",className:"rounded bg-blue-500 px-4 py-2 text-white shadow hover:bg-blue-600",children:"Stock Transactions"}),a.jsx("button",{onClick:A,className:"rounded bg-green-500 px-4 py-2 text-white shadow hover:bg-green-600",children:"Export to Excel"})]})]}),a.jsxs("div",{className:"col-span-3 mb-4 grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[a.jsxs("select",{value:x||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>z(e.target.value),children:[a.jsx("option",{value:"",children:"All Categories"}),y.map(e=>a.jsx("option",{value:e.id,children:e.category_name},e.id))]}),a.jsxs("select",{value:u||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>S(e.target.value),children:[a.jsx("option",{value:"",children:"All Sizes"}),b.map(e=>a.jsx("option",{value:e.id,children:e.size_name},e.id))]}),a.jsxs("select",{value:h||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>w(e.target.value),children:[a.jsx("option",{value:"",children:"Size Values"}),j.map(e=>a.jsx("option",{value:e.id,children:e.size_values},e.id))]}),a.jsxs("select",{value:p||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>C(e.target.value),children:[a.jsx("option",{value:"",children:"All Heel Heights"}),_.map(e=>a.jsx("option",{value:e.id,children:e.value},e.id))]}),a.jsxs("select",{value:c||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>f(e.target.value),children:[a.jsx("option",{value:"",children:"All Colors"}),g.map(e=>a.jsx("option",{value:e.id,children:e.color_name},e.id))]}),a.jsxs("select",{value:n,className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>L(e.target.value),children:[a.jsx("option",{value:"all",children:"All Quantities"}),a.jsx("option",{value:"negative",children:"Negative Quantities"}),a.jsx("option",{value:"zero",children:"Zero Quantities"}),a.jsx("option",{value:"positive",children:"Positive Quantities"})]})]}),a.jsx("input",{type:"text",placeholder:"Search for a product.product_variant...",className:"w-full rounded-md border p-2",value:o,onChange:e=>N(e.target.value)}),a.jsxs("table",{className:"mt-4 w-full table-auto border-collapse border border-gray-300 text-center",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Product SKU"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Overall Qty"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Heel Height"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Size"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Size Values"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Category"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Action"})]})}),a.jsx("tbody",{children:m.map(e=>a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.product_variant.sku}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.total_stock}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.product_variant.heel_heights.value}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.product_variant.sizes.size_name}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.product_variant.size_values.size_values}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.product_variant.categories.category_name}),a.jsx("td",{className:"space-x-2 border border-gray-300 px-6 py-3",children:a.jsx(v,{href:`/inventory/product/variant/${e.product_variant.id}`,className:"text-orange-500 hover:underline",children:"View"})})]},e.product_variant.id))})]})]})})})})})})};export{k as default};
