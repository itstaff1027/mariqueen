import{r as a,j as e,U as f,h as S}from"./app-C3V3ZFep.js";import{A as L}from"./AuthenticatedLayout-DP8v5RI5.js";import"./ApplicationLogo-BcrHQoSU.js";const R=({stock_transactions:l,warehouses:t})=>{const[p,T]=a.useState(""),[m,w]=a.useState(""),[b,_]=a.useState(""),[g,k]=a.useState(""),[j,D]=a.useState(""),[y,W]=a.useState(""),[v,C]=a.useState(""),A=()=>{S.visit("/inventory/stock/transactions",{method:"get",data:{fromWarehouse:m,toWarehouse:b,transactionType:g,status:j,search:p,fromDate:y,toDate:v},preserveState:!0,preserveScroll:!0})},F=()=>{const r=["Transaction ID","From Warehouse","To Warehouse","Transaction Type","Status","Created At","Updated At"],n=l.data.map(s=>{var u,d;return[s.id,((u=t.find(i=>i.id===s.from_warehouse_id))==null?void 0:u.name)||"N/A",((d=t.find(i=>i.id===s.to_warehouse_id))==null?void 0:d.name)||"N/A",s.transaction_type,s.status,s.created_at,s.updated_at]}),h=[r,...n],c=XLSX.utils.aoa_to_sheet(h),x=r.map((s,u)=>{let d=s?s.toString().length:10;return h.forEach(i=>{const N=i[u];N&&(d=Math.max(d,N.toString().length))}),{wch:d+2}});c["!cols"]=x;const o=XLSX.utils.book_new();XLSX.utils.book_append_sheet(o,c,"Stock Transactions"),XLSX.writeFile(o,`Stock_Transactions_${new Date().toISOString().split("T")[0]}.xlsx`)};return a.useEffect(()=>{console.log(l),console.log(t)},[]),e.jsx(L,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Stock Transactions"}),children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-md rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Stock Transactions"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(f,{href:"/inventory/stock/transactions/create",className:"bg-blue-500 text-white px-4 py-2 rounded shadow hover:bg-blue-600",children:"Create"}),e.jsx("button",{onClick:F,className:"bg-green-500 text-white px-4 py-2 rounded",children:"Export to Excel"})]})]}),e.jsxs("div",{className:"col-span-3 mb-4 grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[e.jsx("input",{type:"text",placeholder:"Search for a TS#...",className:"w-full rounded-md border p-2 mb-2",value:p,onChange:r=>T(r.target.value)}),e.jsxs("select",{value:m||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:r=>w(r.target.value),children:[e.jsx("option",{value:"",children:"From Warehouse"}),t.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsxs("select",{value:b||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:r=>_(r.target.value),children:[e.jsx("option",{value:"",children:"To Warehouse"}),t.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsxs("select",{value:g||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:r=>k(r.target.value),children:[e.jsx("option",{value:"",children:"Transaction Types"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"transfer",children:"Transfer"})]}),e.jsxs("select",{value:j||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:r=>D(r.target.value),children:[e.jsx("option",{value:"",children:"Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"From Date:"}),e.jsx("input",{type:"date",value:y,onChange:r=>W(r.target.value),className:"border rounded p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"To Date:"}),e.jsx("input",{type:"date",value:v,onChange:r=>C(r.target.value),className:"border rounded p-2"})]}),e.jsx("button",{onClick:A,className:"bg-blue-500 text-white px-4 py-2 rounded shadow hover:bg-blue-600",children:"Filter"})]}),e.jsxs("table",{className:"w-full table-auto border-collapse border text-center border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Transaction ID"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"From Warehouse"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"To Warehouse"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Transaction Type"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Status"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Date"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Action"})]})}),e.jsx("tbody",{children:l.data.map(r=>{var c,x;const n=((c=t.find(o=>o.id===r.from_warehouse_id))==null?void 0:c.name)||"N/A",h=((x=t.find(o=>o.id===r.to_warehouse_id))==null?void 0:x.name)||"N/A";return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.id}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:n}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:h}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.transaction_type}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.status}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:new Date(r.created_at).toLocaleString()}),e.jsx("td",{className:"border border-gray-300 px-6 py-3 space-x-2",children:e.jsx(f,{href:`/inventory/stock/transactions/${r.id}`,className:"text-orange-500 hover:underline",children:"View"})})]},r.id)})})]}),l.links&&e.jsx("div",{className:"mt-4 flex justify-center",children:l.links.map((r,n)=>e.jsx("button",{onClick:()=>{r.url&&S.visit(r.url,{preserveState:!0,preserveScroll:!0})},className:`mx-1 px-3 py-1 border rounded ${r.active?"bg-blue-500 text-white":"bg-white text-blue-500"}`,dangerouslySetInnerHTML:{__html:r.label}},n))})]})})})})})})};export{R as default};
