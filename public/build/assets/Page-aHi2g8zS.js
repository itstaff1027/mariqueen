import{r as d,V as g,j as e,h as j}from"./app-B1sjvdko.js";import{A as f}from"./AuthenticatedLayout-Bmz7T_3p.js";import{T as m}from"./TextInput-CfKEztCc.js";import{I as l}from"./InputLabel-djE-f7yw.js";import{A as v}from"./ActionsDropdown-Dbx5YjHz.js";import{J as w}from"./textarea--7GnwU3j.js";import"./ApplicationLogo-lMO7AezW.js";import"./description-C8cd--kZ.js";import"./use-sync-refs-BCFdLMUQ.js";const F=({sales_order_return:t})=>{var u;const[x,p]=d.useState([]),[a,N]=d.useState(((u=t==null?void 0:t.reference_order.items)==null?void 0:u.map(s=>({...s,returnQuantity:s.quantity})))||[]),{auth:o}=g().props,[c,b]=d.useState(t==null?void 0:t.return_items);d.useEffect(()=>{p(h(o.user))},[o.user]);const h=s=>{const i=s.roles.flatMap(r=>r.permissions),n=[];return i.some(r=>r.name==="update"&&t.status!=="cancelled"&&t.status!=="complete")&&n.push("pending","processing","complete"),i.some(r=>r.name==="cancel")&&n.push("cancel"),n},y=s=>{if(confirm(`Are you sure you want to update the order status to ${s}?`)){const i=s;j.post(`/sales_order_returns/update/status/${t.id}`,{new_status:i})}};return e.jsx(f,{header:e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Create Order Return"}),children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"rounded-lg bg-white p-8 shadow-lg",children:[e.jsxs("div",{className:"mb-4 flex justify-between w-full",children:[e.jsxs("h1",{children:["Current Status: ",e.jsx("u",{children:t.status})]}),e.jsx(v,{states:x,onSelectStatus:s=>y(s)})]}),e.jsxs("div",{className:"relative mb-8",children:[e.jsx(l,{htmlFor:"order_number",value:"Order Number"}),e.jsx(m,{id:"order_number",name:"order_number",value:t.reference_order.order_number,disabled:!0,placeholder:"Search Order Number...",className:"w-full rounded-md border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx(l,{htmlFor:"return_date",value:"Return Date (YYYY-MM-DD)"}),e.jsx(m,{id:"return_date",name:"return_date",value:t.return_date,disabled:!0,placeholder:"Return Date",className:"w-full rounded-md border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx(l,{htmlFor:"warehouse_id",value:"Select Warehouse"}),e.jsx("input",{className:"w-full rounded-md border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",id:"warehouse_id",name:"warehouse_id",value:t.warehouse.name,disabled:!0})]}),e.jsxs("div",{className:"overflow-x-auto mb-8",children:[e.jsx("h1",{children:"Original"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"For Return Qty"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[a==null?void 0:a.map(s=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700",children:s.id}),e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700",children:[s.product_variant.product.product_name," ","–"," ",s.product_variant.colors.color_name," ","– Size:"," ",parseInt(s.product_variant.size_values.size_values)," ","– Heel:"," ",s.product_variant.heel_heights.value,'"']}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:s.quantity})]},s.id)),a.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No items to display."})})]})]})]}),e.jsxs("div",{className:"overflow-x-auto mb-8",children:[e.jsx("h1",{children:"Reference"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Returned Qty"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[c==null?void 0:c.map(s=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700",children:s.id}),e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700",children:[s.sales_order_items.product_variant.product.product_name," ","–"," ",s.sales_order_items.product_variant.colors.color_name," ","– Size:"," ",parseInt(s.sales_order_items.product_variant.size_values.size_values)," ","– Heel:"," ",s.sales_order_items.product_variant.heel_heights.value,'"']}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:s.quantity})]},s.id)),a.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No items to display."})})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"remarks",value:"Remarks"}),e.jsx(w,{id:"remarks",name:"remarks",value:t.remarks,disabled:!0,placeholder:"Remarks/Note/Reasons...",className:"w-full rounded-md border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})})})})};export{F as default};
