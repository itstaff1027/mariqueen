import{r as i,j as e,h as w}from"./app-xcrMessi.js";import{A as S}from"./AuthenticatedLayout-Cz4_lLEk.js";import"./ApplicationLogo-CBeWglCO.js";const q=({product_variants:p,warehouses:u})=>{const[l,o]=i.useState([]),[x,h]=i.useState({}),[n,m]=i.useState(""),b=()=>{o([...l,{id:"",sku:"",quantity:"",remarks:""}])},y=r=>{o(l.filter(s=>s.id!==r))},c=(r,s,a)=>{const t=l.map(d=>d.id===r?{...d,[s]:a}:d);o(t)},g=(r,s,a)=>{const t=l.map((d,k)=>k===r?{...d,sku:s,id:a}:d);o(t),h(d=>({...d,[r]:!1}))},j=r=>{const s=l.map(a=>a.sku).filter(Boolean);return p.filter(a=>a.sku===r||!s.includes(a.sku))},N=r=>{h(s=>({...s,[r]:!s[r]}))},v=r=>{m(r)},f=r=>{r.preventDefault();const s=l.map(a=>({id:a.id,sku:a.sku,quantity:a.quantity,remarks:a.remarks,warehouse_id:n}));console.log(s),w.post("/inventory/stocks",{rows:s})};return e.jsx(S,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Products Management"}),children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-md rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Product Variants"}),e.jsx("button",{onClick:b,className:"bg-blue-500 text-white px-4 py-2 rounded shadow hover:bg-blue-600",children:"Add Row"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Select Warehouse:"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-4 py-2",value:n,onChange:r=>v(r.target.value),children:[e.jsx("option",{value:"",disabled:!0,children:"Select a warehouse"}),u.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("table",{className:"w-full table-auto border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Product SKU"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Quantity"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Remarks"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Warehouse"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:l.map((r,s)=>{var a;return e.jsxs("tr",{children:[e.jsxs("td",{className:"border border-gray-300 px-4 py-2 relative",children:[e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-2 py-1",placeholder:"Search SKU",value:r.sku,onFocus:()=>N(s),onChange:t=>c(r.id,"sku",t.target.value)}),x[s]&&e.jsx("ul",{className:"absolute z-10 bg-white border border-gray-300 rounded w-full max-h-40 overflow-y-auto",style:{top:"100%"},children:j(r.sku).map(t=>e.jsx("li",{className:"px-4 py-2 hover:bg-gray-200 cursor-pointer",onClick:()=>g(s,t.sku,t.id),children:t.sku},t.id))})]}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-2 py-1",placeholder:"Enter Quantity",value:r.quantity,onChange:t=>c(r.id,"quantity",t.target.value)})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-2 py-1",placeholder:"Enter Remarks",value:r.remarks,onChange:t=>c(r.id,"remarks",t.target.value)})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-2 py-1 bg-gray-100 cursor-not-allowed",value:((a=u.find(t=>t.id.toString()===n))==null?void 0:a.name)||"",readOnly:!0})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>y(r.id),className:"bg-red-500 text-white px-2 py-1 rounded shadow hover:bg-red-600",children:"Remove"})})]},s)})})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded shadow hover:bg-green-600",children:"Submit"})})]})]})})})})})})};export{q as default};
