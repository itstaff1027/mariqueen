import{a as p,V as j,r as f,j as e,U as v,h as b}from"./app-CNtLemjm.js";import{A as _}from"./AuthenticatedLayout-DFlyvMr1.js";import{T as o}from"./TextInput-DOoV6gdF.js";import{I as d}from"./InputLabel-D_t4371S.js";import{I as N}from"./InputError-Bv2Dc47b.js";import"./ApplicationLogo-Dz0w4Zzv.js";const E=({discount:t,products:a})=>{var n;const{data:r,setData:c,post:m,errors:g,reset:u}=p({discount_id:t.id,discount_name:t.name||"",type:t.type||"fixed",discount_value:t.value||"",discount_for:t.discount_for||"",is_active:t.is_active||"0",items:t.items||[],product_id:""}),l=j().props,x=s=>{s.preventDefault(),m("/discount_per_items",{preserveState:!1,onFinish:()=>u()})};return f.useEffect(()=>{console.log(l),console.log(a)},[]),e.jsx(_,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Create Discount"}),children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[l.flash.success&&e.jsx("div",{className:"my-4 bg-emerald-100 p-4 w-full border border-emerald-500 rounded-xl",children:e.jsx("p",{className:"text-emerald-600 text-sm",children:l.flash.success})}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(d,{for:"discount_name",value:"Discount's Name"}),e.jsx(o,{id:"discount_name",name:"discount_name",value:r.discount_name,className:"w-full border-none",disabled:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(d,{for:"discount_name",value:"Discount Value"}),e.jsx(o,{id:"discount_name",name:"discount_name",value:`${r.type.toUpperCase()} - ${r.discount_value}`,className:"w-full border-none",disabled:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(d,{for:"products",value:"Select Product"}),e.jsxs("select",{className:"w-full rounded-lg border border-slate-200",onChange:s=>c("product_id",s.target.value),value:r.product_id,children:[e.jsx("option",{value:"",children:"Select Product"}),a==null?void 0:a.map((s,i)=>e.jsx("option",{value:s.id,children:s.product_name},i))]}),e.jsx(N,{message:l.errors.product_id})]}),e.jsx("button",{type:"submit",className:"focus:shadow-outline rounded bg-emerald-500 px-4 py-2 font-bold text-white hover:bg-blue-700 focus:outline-none",onClick:x,children:"Add Items"}),e.jsxs("div",{className:"py-2",children:[e.jsx(d,{for:"discount_name",value:"Discounted Items"}),e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Product Name"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:((n=t.items)==null?void 0:n.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:i+1}),e.jsx("td",{children:s.product.product_name}),e.jsx("td",{children:e.jsx(v,{method:"delete",className:"text-red-500 hover:underline",as:"button",onClick:h=>{h.preventDefault(),confirm("Are you sure you want to remove this Item?")&&b.delete(route("discount_per_items.destroy",s.id))},children:"Delete"})})]})))||e.jsx("div",{className:"text-s w-full p-4 text-center text-gray-500",children:"No Items found."})})]})]})]})]})})})})})};export{E as default};
