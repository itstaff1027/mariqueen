import{a as z,r as m,j as t}from"./app-B5iY72Ue.js";import{A as P}from"./AuthenticatedLayout-CFofA4XK.js";import{I as d}from"./InputLabel-BLoE7w9L.js";import"./ApplicationLogo-DtXMchGH.js";const R=({stock_levels:h,colors:x,heel_heights:g,sizes:_,size_values:v,categories:f,user_warehouse:j,couriers:y,payment_methods:b})=>{const{data:a,setData:l,post:A,errors:L}=z({cart:[],filters:{category:null,size:null,heelHeight:null,color:null,size_values:null},courier_id:"",payment_method_id:"",shipping_cost:0,rush_order_fee:0,payment_amount:0,total_amount:0,grand_total:0}),[o,C]=m.useState(""),N=e=>{const s=parseFloat(e.product_variant.discount_price)||parseFloat(e.product_variant.unit_price)||0,r=a.cart.findIndex(i=>i.sku===e.product_variant.sku);let n=[...a.cart];r!==-1?n[r].quantity<e.total_stock&&(n[r]={...n[r],quantity:n[r].quantity+1,subtotal:n[r].subtotal+s}):n.push({product_variant_id:e.product_variant.id,product_id:e.product_variant.product_id,sku:e.product_variant.sku,quantity:1,total_stock:e.total_stock,subtotal:s}),l("cart",n)},w=e=>{const s=a.cart.map(r=>{if(r.sku===e&&r.quantity<r.total_stock){const n=r.quantity+1,i=parseFloat(r.discount_price)||parseFloat(r.unit_price);return{...r,quantity:n,subtotal:n*i}}return r});l("cart",s)},S=e=>{let s=a.cart.map(r=>{if(r.sku===e&&r.quantity>1){const n=r.quantity-1,i=parseFloat(r.discount_price)||parseFloat(r.unit_price);return{...r,quantity:n,subtotal:n*i}}return r});s=s.filter(r=>r.quantity>0),l("cart",s)},F=e=>{let s=a.cart.filter(r=>r.sku!==e);l("cart",s)},c=a.cart.reduce((e,s)=>e+s.subtotal,0),p=c+parseFloat(a.shipping_cost||0)+parseFloat(a.rush_order_fee||0),u=a.payment_amount-p,I=h.filter(e=>{const s=(!a.filters.category||e.product_variant.category_id===parseInt(a.filters.category))&&(!a.filters.size||e.product_variant.size_id===parseInt(a.filters.size))&&(!a.filters.size_values||e.product_variant.size_value_id===parseInt(a.filters.size_values))&&(!a.filters.heelHeight||e.product_variant.heel_height_id===parseInt(a.filters.heelHeight))&&(!a.filters.color||e.product_variant.color_id===parseInt(a.filters.color)),r=o===""||e.product_variant.sku.toLowerCase().includes(o.toLowerCase())||e.product_variant.colors.color_name.toLowerCase().includes(o.toLowerCase())||e.product_variant.categories.category_name.toLowerCase().includes(o.toLowerCase());return s&&r}),q=e=>{e.preventDefault(),console.log(a)};return m.useEffect(()=>{l(e=>({...e,total_amount:c,grand_total:p}))},[a.cart,a.shipping_cost,a.rush_order_fee]),t.jsx(P,{header:t.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Point of Sale - Warehouse: ",j]}),children:t.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4",children:[t.jsxs("div",{className:"col-span-3 mb-4 grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5",children:[t.jsxs("select",{value:a.filters.category||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>l("filters",{...a.filters,category:e.target.value?parseInt(e.target.value):null}),children:[t.jsx("option",{value:"",children:"All Categories"}),f.map(e=>t.jsx("option",{value:e.id,children:e.category_name},e.id))]}),t.jsxs("select",{value:a.filters.size||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>l("filters",{...a.filters,size:e.target.value?parseInt(e.target.value):null}),children:[t.jsx("option",{value:"",children:"All Sizes"}),_.map(e=>t.jsx("option",{value:e.id,children:e.size_name},e.id))]}),t.jsxs("select",{value:a.filters.size_values||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>l("filters",{...a.filters,size_values:e.target.value?parseInt(e.target.value):null}),children:[t.jsx("option",{value:"",children:"Size Values"}),v.map(e=>t.jsx("option",{value:e.id,children:e.size_values},e.id))]}),t.jsxs("select",{value:a.filters.heelHeight||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>l("filters",{...a.filters,heelHeight:e.target.value?parseInt(e.target.value):null}),children:[t.jsx("option",{value:"",children:"All Heel Heights"}),g.map(e=>t.jsx("option",{value:e.id,children:e.value},e.id))]}),t.jsxs("select",{value:a.filters.color||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:e=>l("filters",{...a.filters,color:e.target.value?parseInt(e.target.value):null}),children:[t.jsx("option",{value:"",children:"All Colors"}),x.map(e=>t.jsx("option",{value:e.id,children:e.color_name},e.id))]})]}),t.jsxs("div",{className:"col-span-2 rounded-md border p-4 shadow-md",children:[t.jsx("input",{type:"text",placeholder:"Search for a product...",className:"w-full rounded-md border p-2",value:o,onChange:e=>C(e.target.value)}),t.jsx("div",{className:"mt-4 grid grid-cols-3 gap-4",children:I.map((e,s)=>t.jsxs("div",{className:"rounded-md border p-4",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:["SKU: ",e.product_variant.sku]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Stock: ",e.total_stock]}),t.jsxs("p",{className:"mt-2 text-lg font-bold",children:["₱",e.product_variant.discount_price||e.product_variant.unit_price]}),t.jsx("button",{onClick:()=>N(e),className:"mt-2 rounded-md bg-blue-500 px-4 py-2 text-white",children:"Add to Cart"})]},s))})]}),t.jsxs("div",{className:"rounded-md border p-4 shadow-md",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Cart"}),a.cart.length===0?t.jsx("p",{className:"text-gray-500",children:"No items in cart"}):t.jsx("div",{children:a.cart.map((e,s)=>t.jsxs("div",{className:"flex items-center justify-between border-b py-2",children:[t.jsxs("span",{children:[e.sku," (x",e.quantity,")"]}),t.jsxs("span",{children:["₱",parseFloat(e.subtotal||0).toFixed(2)]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("button",{onClick:()=>S(e.sku),className:"mx-1 rounded-md bg-gray-300 px-2 py-1 text-gray-700",children:"-"}),t.jsx("button",{onClick:()=>w(e.sku),className:"mx-1 rounded-md bg-gray-300 px-2 py-1 text-gray-700",children:"+"}),t.jsx("button",{onClick:()=>F(e.sku),className:"ml-2 text-red-500",children:"Remove"})]})]},s))}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("p",{className:"text-lg font-bold",children:["Total: ₱",c.toFixed(2)]}),t.jsx("h1",{children:"KULANG NG FETCHING FOR DISCOUNTS, PROMO, BUNDLES, ADD NG CUSTOMER"}),t.jsx(d,{for:"courier",value:"Couriers"}),t.jsxs("select",{className:"w-full rounded-md border p-2",value:a.courier_id,onChange:e=>l("courier_id",e.target.value),children:[t.jsx("option",{value:"",children:"Select Courier"}),y.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]}),t.jsx(d,{for:"payment_method",value:"Payment Method"}),t.jsxs("select",{className:"w-full rounded-md border p-2",value:a.payment_method_id,onChange:e=>l("payment_method_id",e.target.value),children:[t.jsx("option",{value:"",children:"Select Payment Method"}),b.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]}),t.jsx(d,{for:"shipping_cost",value:"Shipping Cost"}),t.jsx("input",{type:"number",placeholder:"Shipping Cost",className:"w-full rounded-md border p-2",value:a.shipping_cost,onChange:e=>l("shipping_cost",e.target.value)}),t.jsx(d,{for:"rush_order_fee",value:"Rush Cost"}),t.jsx("input",{type:"number",placeholder:"Rush Order Fee",className:"w-full rounded-md border p-2",value:a.rush_order_fee,onChange:e=>l("rush_order_fee",e.target.value)}),t.jsx(d,{for:"payment_amount",value:"Client Payment"}),t.jsx("input",{type:"number",placeholder:"Enter Payment Amount",className:"w-full rounded-md border p-2",value:a.payment_amount,onChange:e=>l("payment_amount",e.target.value)}),t.jsxs("p",{className:"mt-2 text-lg font-bold",children:["Grand Total: ₱",p.toFixed(2)]}),t.jsx("p",{className:`mt-2 text-lg ${u<0?"text-red-500":"text-green-500"}`,children:u<0?`Balance Due: ₱${Math.abs(u).toFixed(2)}`:`Change: ₱${u.toFixed(2)}`}),t.jsx("button",{onClick:q,className:"mt-2 w-full rounded-md bg-green-500 px-4 py-2 text-white",children:"Process Sale"})]})]})]})})};export{R as default};
