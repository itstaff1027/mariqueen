import{r as l,j as e,U as o,h as p}from"./app-QVnGVJj3.js";import{A as _}from"./AuthenticatedLayout-MkJGPHYv.js";import"./ApplicationLogo-CAYc3vXU.js";const D=({mto_sales_payments:a})=>{var x;const[c,g]=l.useState(""),[n,y]=l.useState(""),[i,j]=l.useState(""),N=()=>{p.visit("/mto_sales_payments",{method:"get",data:{search:c,fromDate:n,toDate:i},preserveState:!0,preserveScroll:!0})};l.useEffect(()=>{console.log(a)},[]);const f=()=>{const r=["Return #","Sales #","Client Name","Status","Type","Return to","Return Date","Created At"],t=sales_order_returns.data.map(s=>[s.return_number,s.reference_order.order_number,s.reference_order.customers.first_name+" "+s.reference_order.customers.last_name,s.status,s.return_type,s.warehouse.name,s.return_date,s.created_at]),m=[r,...t],h=XLSX.utils.aoa_to_sheet(m),w=r.map((s,v)=>{let d=s?s.toString().length:10;return m.forEach(S=>{const b=S[v];b&&(d=Math.max(d,b.toString().length))}),{wch:d+2}});h["!cols"]=w;const u=XLSX.utils.book_new();XLSX.utils.book_append_sheet(u,h,"MTO Sales Payments Transactions"),XLSX.writeFile(u,`MTO_Sales_Payments_Transactions_${new Date().toISOString().split("T")[0]}.xlsx`)};return e.jsx(_,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"MTO Sales Payments"}),children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-md",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-2 w-full space-y-6 rounded-2xl bg-white p-6 shadow-md",children:[e.jsxs("div",{className:"md:justify-betweem flex w-full flex-col justify-between gap-4 md:flex-row md:items-center",children:[e.jsx("h1",{className:"w-full text-3xl font-semibold",children:"MTO Sales Payments"}),e.jsxs("div",{className:"flex w-full flex-wrap justify-end gap-3",children:[e.jsx(o,{href:"/sales_payments/create",className:"rounded bg-blue-500 px-4 py-2 text-white shadow hover:bg-blue-600",children:"Create Payments"}),e.jsx("button",{onClick:f,className:"rounded-lg bg-green-600 px-4 py-2 text-white transition hover:bg-green-700",children:"Export"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-end gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"From Date:"}),e.jsx("input",{type:"date",value:n,onChange:r=>y(r.target.value),className:"w-full rounded border p-2"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"To Date:"}),e.jsx("input",{type:"date",value:i,onChange:r=>j(r.target.value),className:"w-full rounded border p-2"})]}),e.jsx("button",{onClick:N,className:"rounded bg-blue-500 px-4 py-2 text-white shadow hover:bg-blue-600",children:"Filter"})]}),e.jsx("div",{className:"relative m-0 w-full",children:e.jsx("input",{type:"text",placeholder:"Search for MTO Order #, Client Name, or Payment status",className:"absolute w-full -translate-y-1/2 text-gray-400",value:c,onChange:r=>g(r.target.value)})})]}),e.jsxs("table",{className:"w-full table-auto border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"#"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"MTO #"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Client Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Status"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Total Cost"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Balance"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Payment"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Action"})]})}),e.jsx("tbody",{children:(x=a.data)==null?void 0:x.map((r,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t+1}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.sales_order.mto_order_number}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[r.sales_order.customers.first_name," ",r.sales_order.customers.last_name]}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.status}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.sales_order.grand_amount}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.remaining_balance}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.amount_paid}),e.jsxs("td",{className:"space-x-2 border border-gray-300 px-6 py-3",children:[e.jsx(o,{href:`/mto_sales_payments/${r.id}/edit`,className:"text-blue-500 hover:underline",children:"Edit"}),e.jsx(o,{href:`/mto_sales_payments/${r.id}`,className:"text-emerald-500 hover:underline",children:"View"})]})]},r.id))})]}),a.links&&e.jsx("div",{className:"mt-4 flex justify-center",children:a.links.map((r,t)=>e.jsx("button",{onClick:()=>{r.url&&p.visit(r.url,{preserveState:!0,preserveScroll:!0})},className:`mx-1 rounded border px-3 py-1 ${r.active?"bg-blue-500 text-white":"bg-white text-blue-500"}`,dangerouslySetInnerHTML:{__html:r.label}},t))})]})})})})})})};export{D as default};
