import{r as s,j as e,U as F,h as f}from"./app-CNtLemjm.js";import{I as A}from"./InventoryLayout-DiNKVmRZ.js";import{a as X}from"./Links-De5lviw2.js";import"./Dropdown-CX_2cq7m.js";import"./transition-BHL_Jt7j.js";import"./use-sync-refs-Bn8sev2R.js";import"./AuthenticatedLayout-DFlyvMr1.js";import"./ApplicationLogo-Dz0w4Zzv.js";import"./SubNavigation-DtQYuMff.js";import"./ResponsiveNavLink-BI4DjDTS.js";import"./createLucideIcon-BVGKL5Xa.js";const z=({stock_transactions:n,warehouses:a})=>{const[u,S]=s.useState(""),[x,T]=s.useState(""),[b,w]=s.useState(""),[j,_]=s.useState(""),[g,k]=s.useState(""),[y,C]=s.useState(""),[v,D]=s.useState(""),W=()=>{f.visit("/inventory/stock/transactions",{method:"get",data:{fromWarehouse:x,toWarehouse:b,transactionType:j,status:g,search:u,fromDate:y,toDate:v},preserveState:!0,preserveScroll:!0})},L=()=>{const r=["Transaction ID","From Warehouse","To Warehouse","Transaction Type","Status","Created At","Updated At"],l=n.data.map(t=>{var m,d;return[t.id,((m=a.find(i=>i.id===t.from_warehouse_id))==null?void 0:m.name)||"N/A",((d=a.find(i=>i.id===t.to_warehouse_id))==null?void 0:d.name)||"N/A",t.transaction_type,t.status,t.created_at,t.updated_at]}),h=[r,...l],c=XLSX.utils.aoa_to_sheet(h),p=r.map((t,m)=>{let d=t?t.toString().length:10;return h.forEach(i=>{const N=i[m];N&&(d=Math.max(d,N.toString().length))}),{wch:d+2}});c["!cols"]=p;const o=XLSX.utils.book_new();XLSX.utils.book_append_sheet(o,c,"Stock Transactions"),XLSX.writeFile(o,`Stock_Transactions_${new Date().toISOString().split("T")[0]}.xlsx`)};return s.useEffect(()=>{console.log(n),console.log(a)},[]),e.jsx(A,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Stock Transactions"}),e.jsx(X,{href:"/inventory/stock/transactions/create",name:"Create Stock Transactions"})]}),children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Stock Transactions"}),e.jsx("div",{className:"space-x-2",children:e.jsx("button",{onClick:L,className:"bg-green-500 text-white px-4 py-2 rounded",children:"Export to Excel"})})]}),e.jsxs("div",{className:"col-span-3 mb-4 grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[e.jsx("input",{type:"text",placeholder:"Search for a TS#...",className:"w-full rounded-md border p-2 mb-2",value:u,onChange:r=>S(r.target.value)}),e.jsxs("select",{value:x||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:r=>T(r.target.value),children:[e.jsx("option",{value:"",children:"From Warehouse"}),a.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsxs("select",{value:b||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:r=>w(r.target.value),children:[e.jsx("option",{value:"",children:"To Warehouse"}),a.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsxs("select",{value:j||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:r=>_(r.target.value),children:[e.jsx("option",{value:"",children:"Transaction Types"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"transfer",children:"Transfer"})]}),e.jsxs("select",{value:g||"",className:"rounded-md border p-2 shadow-sm focus:outline-none",onChange:r=>k(r.target.value),children:[e.jsx("option",{value:"",children:"Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"From Date:"}),e.jsx("input",{type:"date",value:y,onChange:r=>C(r.target.value),className:"border rounded p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"To Date:"}),e.jsx("input",{type:"date",value:v,onChange:r=>D(r.target.value),className:"border rounded p-2"})]}),e.jsx("button",{onClick:W,className:"bg-blue-500 text-white px-4 py-2 rounded shadow hover:bg-blue-600",children:"Filter"})]}),e.jsxs("table",{className:"w-full table-auto border-collapse border text-center border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Transaction ID"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"From Warehouse"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"To Warehouse"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Transaction Type"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Status"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Date"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Action"})]})}),e.jsx("tbody",{children:n.data.map(r=>{var c,p;const l=((c=a.find(o=>o.id===r.from_warehouse_id))==null?void 0:c.name)||"N/A",h=((p=a.find(o=>o.id===r.to_warehouse_id))==null?void 0:p.name)||"N/A";return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.id}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:l}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:h}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.transaction_type}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.status}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:new Date(r.created_at).toLocaleString()}),e.jsx("td",{className:"border border-gray-300 px-6 py-3 space-x-2",children:e.jsx(F,{href:`/inventory/stock/transactions/${r.id}`,className:"text-orange-500 hover:underline",children:"View"})})]},r.id)})})]}),n.links&&e.jsx("div",{className:"mt-4 flex justify-center",children:n.links.map((r,l)=>e.jsx("button",{onClick:()=>{r.url&&f.visit(r.url,{preserveState:!0,preserveScroll:!0})},className:`mx-1 px-3 py-1 border rounded ${r.active?"bg-blue-500 text-white":"bg-white text-blue-500"}`,dangerouslySetInnerHTML:{__html:r.label}},l))})]})})})};export{z as default};
