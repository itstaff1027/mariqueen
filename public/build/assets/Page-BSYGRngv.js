import{a as v,j as s}from"./app-CxxiVb06.js";import{A as w}from"./AuthenticatedLayout-Ca1yLvkt.js";import{I as u}from"./InputLabel-Dj15tj3w.js";import{I as x}from"./InputError-CA3Z9yVB.js";import"./ApplicationLogo-BPvy8byy.js";const k=({warehouses:o,users:n,assignedUsers:t})=>{const{data:r,setData:m,post:p,delete:b,processing:c,errors:h}=v({warehouse_id:o.id,user_ids:t.filter(e=>e.warehouse_id===o.id).map(e=>({id:e.id}))||[]}),g=e=>{r.user_ids.some(i=>i.id===e.id)||m("user_ids",[...r.user_ids,{id:e.id}])},f=e=>{m("user_ids",r.user_ids.filter(i=>i.id!==e))},j=e=>{e.preventDefault(),console.log(r),p("/inventory/warehouse/assign_warehouse")},_=e=>{b(`/inventory/warehouse/assign_warehouse/${e}`)};return s.jsx(w,{header:s.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Assign Users to Warehouses"}),children:s.jsx("div",{className:"py-12",children:s.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:s.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:s.jsxs("div",{className:"p-6 text-gray-900",children:[s.jsx("h1",{className:"text-xl font-semibold mb-6",children:"Manage Warehouse Users"}),s.jsxs("div",{className:"mb-6",children:[s.jsx(u,{value:"Selected Warehouse"}),s.jsx("h1",{className:"text-lg font-semibold",children:o.name}),s.jsx(x,{message:h.warehouse_id})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx(u,{value:"Assign Users to Warehouse"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:r.user_ids.map((e,i)=>{const d=n.find(l=>l.id===e.id),a=t.some(l=>l.user_id===e.id&&l.warehouse_id===r.warehouse_id);return d&&s.jsxs("span",{className:"flex items-center bg-blue-100 text-blue-700 px-3 py-1 rounded-full",children:[d.name,a?null:s.jsx("button",{className:"ml-2 text-red-500 hover:text-red-700",onClick:()=>f(e.id),"aria-label":`Remove ${d.name}`,children:"Ã—"})]},i)})}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:n.map((e,i)=>{r.user_ids.some(a=>a.id===e.id);const d=t.some(a=>a.user_id===e.id&&a.warehouse_id===r.warehouse_id);return s.jsx("button",{onClick:()=>g(e),className:`border px-4 py-2 rounded-lg text-center text-sm font-medium transition ${d?"bg-gray-200 text-gray-400 cursor-not-allowed":"hover:bg-blue-100 hover:border-blue-400"}`,disabled:d,children:e.name},i)})}),s.jsx(x,{message:h.user_ids}),s.jsx("button",{type:"submit",onClick:j,className:"mt-4 bg-emerald-500 hover:bg-emerald-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",disabled:c,children:"Assign Users"})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Assigned Users"}),t.filter(e=>e.warehouse_id===r.warehouse_id).length>0?s.jsxs("ul",{children:[t.filter(e=>e.warehouse_id===r.warehouse_id).map(e=>{const i=n.find(d=>d.id===e.user_id);return i?s.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[s.jsx("span",{children:i.name}),s.jsx("button",{onClick:()=>_(i.id),className:"bg-red-500 hover:bg-red-700 text-white text-sm px-3 py-1 rounded",disabled:c,children:"Remove"})]},i.id):null}).filter(Boolean)," "]}):s.jsx("p",{className:"text-gray-500",children:"No users assigned."})]})]})})})})})};export{k as default};
